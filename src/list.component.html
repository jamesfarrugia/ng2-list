<div class="container-fluid" style="padding: 0px;background:#fff" [ngStyle]="{'display':flow?'flow-root':'block'}">
  <div class="row" *ngIf="state == states().Processing" style="margin:0px">
    <div class="col-xs-12">
        <div class="list-message">
            One moment...
          </div>
        <div class="progress progress-striped active">
          <div class="progress-bar progress-bar-primary" style="width: 100%"></div>
        </div>
    </div>
  </div>

  <div class="row" *ngIf="state == states().Error" style="margin:0px">
    <div class="col-xs-12">
      <div class="alert alert-dismissible alert-warning">
        <h4>Oops!</h4>

        <p>An error was encountered, can you please try again?</p>
        <hr *ngIf="error">
        <small *ngIf="error">Here's what we know: <b>{{error.title}}</b> - {{error.description}}</small>
      </div>
    </div>
  </div>

  <div class="list" *ngIf="((items && items.length > 0) || headerOnEmpty) && state == states().List">
    <div class="list-header-row no-select">
      <div class="list-header-cell" *ngFor="let cell of schema" [ngStyle]="{flex:cell.size}">
        <span *ngIf="cell.type != 'spacer'">{{cell.name}}</span>
      </div>
    </div>

    <div class="list-message" *ngIf="(!items || items.length == 0) && state == states().List" style="margin:0px">
      There doesn't seem to be anything here.
    </div>
  
    <div class="list-items" [style.max-height]="maxHeight">
      <div class="list-item no-select"
            *ngFor="let item of items"
            (dblclick)="onItemDblClick($event, item)"
            (click)="onItemClick($event, item)"
            [ngClass]="itemClass(item)">
        <div class="list-item-container">
          <div class="list-item-cell" *ngFor="let cell of schema" [ngStyle]="{flex:cell.size, textAlign:cell.type=='icon'?'center':'left'}" [ngSwitch]="cell.type">
            <ng-container *ngSwitchCase="'icon'">
              <i class="material-icons list-icon" *ngIf="!cell.fixed">{{getItemValue(item, cell.value, cell)}}</i>
              <i class="material-icons list-icon" *ngIf="cell.fixed">{{getItemValue(item, cell.value, cell)}}</i>
            </ng-container>
            <span *ngSwitchCase="'text'" [title]="getItemValue(item, cell.value, cell)">{{getItemValue(item, cell.value, cell)}}</span>
            <ng-container *ngSwitchCase="'boolean'">
              <i class="fa fa-check" *ngIf="getItemValue(item, cell.value, cell)"></i>
            </ng-container>
            <span *ngSwitchCase="'mapped'" [title]="cell.map[getItemValue(item, cell.value, cell)]">{{cell.map[getItemValue(item, cell.value, cell)]}}</span>
            <span *ngSwitchCase="'spacer'"></span>
            <span *ngSwitchCase="'price'">â‚¬ {{getItemValue(item, cell.value, cell)/100 | number:'1.2-2'}}</span>
            <span *ngSwitchCase="'date'">{{getItemValue(item, cell.value, cell) | date:'dd-MMM-yyyy HH:mm'}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>